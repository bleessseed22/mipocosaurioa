<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Dino ðŸ’œ</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  overflow:hidden;
  font-family:'Press Start 2P', cursive;
  background:black;
}

canvas{
  position:fixed;
  top:0;
  left:0;
  z-index:-1;
}

.bigText{
  position:absolute;
  width:100%;
  text-align:center;
  color:#d6a4ff;
  font-size:5vw;
  text-shadow:
    0 0 10px #c084ff,
    0 0 20px #c084ff,
    0 0 40px #a855f7;
  animation: bounce 1.6s infinite;
}

#title{ top:20%; }
#jumpText{ top:5%; display:none; }

@keyframes bounce{
  0%,100%{ transform:translateY(0); }
  50%{ transform:translateY(-15px); }
}

#startBtn{
  position:absolute;
  top:60%;
  left:50%;
  transform:translate(-50%,-50%);
  font-family:'Press Start 2P';
  font-size:24px;
  padding:22px 35px;
  border:none;
  border-radius:20px;
  background:#c084ff;
  color:white;
  cursor:pointer;
  box-shadow:0 0 20px #c084ff;
}

#game{
  position:absolute;
  bottom:80px;
  left:0;
  width:100%;
  height:220px;
  display:none;
}

.dino{
  position:absolute;
  left:120px;
  bottom:0;
  width:100px;
  height:100px;
}

.cactus{
  position:absolute;
  bottom:0;
  width:60px;
  height:100px;
}

#question{
  position:absolute;
  top:40%;
  width:100%;
  text-align:center;
  display:none;
}

.qText{
  color:#d6a4ff;
  font-size:4vw;
  margin-bottom:40px;
  text-shadow:0 0 20px #a855f7;
}

.qBtn{
  font-family:'Press Start 2P';
  font-size:22px;
  padding:18px 35px;
  margin:10px;
  border:none;
  border-radius:15px;
  cursor:pointer;
}

#yesBtn{ background:#22c55e; color:white; }
#noBtn{ background:#ef4444; color:white; position:absolute; }

#letter{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:rgba(0,0,0,0.8);
  padding:40px;
  border-radius:20px;
  color:#e9d5ff;
  width:60%;
  text-align:center;
  display:none;
  box-shadow:0 0 30px #a855f7;
}
</style>
</head>

<body>

<canvas id="space"></canvas>

<div id="title" class="bigText">VALENTINE ðŸ’œ</div>
<button id="startBtn">DA CLICK MI VIDA</button>
<div id="jumpText" class="bigText">SALTA MI AMOR!!!</div>

<div id="game">
  <img id="dino" class="dino" src="dino-run-0.png">
</div>

<div id="question">
  <div class="qText">Â¿QUIERES SER MI VALENTINE? ðŸ’œ</div>
  <button id="yesBtn" class="qBtn">SI</button>
  <button id="noBtn" class="qBtn">NO</button>
</div>

<div id="letter">
  <h2>Para ti ðŸ’œ</h2>
  <p>
  Desde que llegaste a mi vida todo tiene mÃ¡s color,
  mÃ¡s luz y mÃ¡s amor.
  Gracias por existir.
  
  Â¿Quieres ser mi San ValentÃ­n? ðŸ’œ
  </p>
</div>

<script>

// ===== MUSICA =====
const music = new Audio("My One And Only Love - Mon Laferte.mp3");
music.loop = true;
let musicStarted = false;

// ===== ESPACIO =====
const canvas = document.getElementById('space');
const ctx = canvas.getContext('2d');

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

let stars = [];
for(let i=0;i<200;i++){
  stars.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    size: Math.random()*2,
    speed: Math.random()*0.6
  });
}

function drawSpace(){
  ctx.fillStyle='black';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle='white';
  stars.forEach(s=>{
    ctx.fillRect(s.x,s.y,s.size,s.size);
    s.y+=s.speed;
    if(s.y>canvas.height) s.y=0;
  });
  requestAnimationFrame(drawSpace);
}
drawSpace();

// ===== GAME =====
const startBtn=document.getElementById('startBtn');
const title=document.getElementById('title');
const game=document.getElementById('game');
const jumpText=document.getElementById('jumpText');
const dino=document.getElementById('dino');

let jumping=false;
let y=0;
let velocity=0;
let gravity=0.7;
let passed=0;

startBtn.onclick=()=>{
  if(!musicStarted){
    music.play();
    musicStarted=true;
  }

  startBtn.style.display='none';
  title.style.display='none';
  game.style.display='block';
  jumpText.style.display='block';
  spawnCactus();
  gameLoop();
};

window.addEventListener('keydown', jump);
window.addEventListener('click', jump);
window.addEventListener('touchstart', jump);

function jump(){
  if(!jumping){
    velocity=14;
    jumping=true;
  }
}

function gameLoop(){
  velocity-=gravity;
  y+=velocity;

  if(y<=0){
    y=0;
    jumping=false;
  }

  dino.style.bottom=y+'px';
  requestAnimationFrame(gameLoop);
}

// ===== ANIMACION CORRER =====
let frame=0;
setInterval(()=>{
  frame = frame===0 ? 1 : 0;
  dino.src = frame ? "dino-run-0.png" : "dino-run-1.png";
},120);

// ===== CACTUS =====
function spawnCactus(){
  let cactus=document.createElement('img');
  cactus.src="cactus.png";
  cactus.className='cactus';
  game.appendChild(cactus);

  let x=window.innerWidth;
  let move=setInterval(()=>{
    x-=8;
    cactus.style.left=x+'px';

    if(x<160 && x>100 && y<60){
      dino.src="dino-lose.png";
      setTimeout(()=>location.reload(),1000);
    }

    if(x<0){
      cactus.remove();
      clearInterval(move);
      passed++;
      if(passed>=6){ endGame(); }
      else spawnCactus();
    }
  },20);
}

function endGame(){
  game.style.display='none';
  jumpText.style.display='none';
  document.getElementById('question').style.display='block';
}

// ===== BOTONES =====
const noBtn=document.getElementById('noBtn');
const yesBtn=document.getElementById('yesBtn');

function moveNo(){
  noBtn.style.left=Math.random()*80+'%';
  noBtn.style.top=Math.random()*80+'%';
}

noBtn.addEventListener('mouseover',moveNo);
noBtn.addEventListener('touchstart',moveNo);

yesBtn.onclick=()=>{
  document.getElementById('question').style.display='none';
  document.getElementById('letter').style.display='block';
};

</script>
</body>
</html>